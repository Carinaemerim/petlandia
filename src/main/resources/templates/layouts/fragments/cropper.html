<div th:fragment="cropper(photo)" class="cropper-init" th:id="${'cropper-' + photo}">

    <div class="form-group">
        <label th:text="#{cropper.label.__${photo}__}">label</label>

        <div class="img-preview cropper-preview-remove">
            <img th:src="*{__${photo} + '.currentImage'__}" class="img-fluid">
        </div>

        <div class="invalid-feedback" th:if="${#fields.hasErrors('__${photo}__')}"
             th:errors="*{mainPhoto}"></div>

        <input type="hidden" th:field="*{__${photo} + '.x'__}" class="input-x">
        <input type="hidden" th:field="*{__${photo} + '.y'__}" class="input-y">
        <input type="hidden" th:field="*{__${photo} + '.width'__}" class="input-width">
        <input type="hidden" th:field="*{__${photo} + '.height'__}" class="input-height">
        <input type="hidden" th:field="*{__${photo} + '.rotate'__}" class="input-rotate">
        <input type="hidden" th:field="*{__${photo} + '.scaleX'__}" class="input-scaleX">
        <input type="hidden" th:field="*{__${photo} + '.scaleY'__}" class="input-scaleY">
        <input type="hidden" th:field="*{__${photo} + '.remove'__}" class="input-remove">
    </div>

    <div class="btn-group d-flex">
        <button type="button" class="btn btn-block btn-outline-secondary btn-select w-100"
                th:text="#{cropper.btn.select}">open modal</button>

        <button type="button" class="btn btn-outline-danger btn-remove"
                th:if="*{__${photo} + '.canRemove'__}">
            <i class="fa fa-trash"></i>
        </button>
    </div>
    <div class="modal fade in" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:text="#{cropper.title}">modal title</h5>
                </div>
                <div class="modal-body">
                    <div class="img-container">
                        <img th:src="*{__${photo} + '.currentImage'__}" class="crop-image img-fluid">
                    </div>

                    <input type="file" class="custom-file crop-input"
                           th:field="*{__${photo} + '.image'__}" accept="image/*"
                           th:classappend="${#fields.hasErrors('__${photo}__')} ? is-invalid">

                </div>
                <div class="modal-footer">
                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary btn-submit"
                                th:text="#{cropper.btn.submit}">Select file</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

